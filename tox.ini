[tox]
envlist = py36, flake8, verify

[testenv:flake8]
skipsdist = true
skip_install = true
basepython = python
deps = flake8
commands = flake8 awsme

[testenv]
setenv =
    PYTHONPATH = {toxinidir}
    BOTO_CONFIG=/dev/null
deps =
    -r{toxinidir}/requirements/dev.hash
install_command =
    python -m pip install --no-deps {opts} {packages}
commands =
    pytest --basetemp={envtmpdir}

[testenv:lint3]
skipsdist = true
skip_install = true
basepython=python3.6
commands = prospector awsme
deps =
    -r{toxinidir}/requirements/dev.hash

[testenv:checkdocs]
skipsdist = true
skip_install = true
commands = python setup.py checkdocs
deps =
    collective.checkdocs
    pygments

[testenv:verify]
skipsdist = true
skip_install = true
basepython = python3.6
deps = pip-compile-multi
commands =
    pip-compile-multi verify

[testenv:lock3]
skipsdist = true
skip_install = true
basepython = python3.6
deps = pip-compile-multi
commands =
    pip-compile-multi --no-upgrade
    pip-compile-multi --no-upgrade -g base -i txt -o hash

[testenv:upgrade3]
skipsdist = true
skip_install = true
basepython = python3.6
deps = pip-compile-multi
commands =
    pip-compile-multi
    pip-compile-multi --no-upgrade -g base -i txt -o hash
